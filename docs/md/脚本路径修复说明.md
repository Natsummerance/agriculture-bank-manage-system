# è„šæœ¬è·¯å¾„ä¿®å¤è¯´æ˜

## ğŸ“‹ ä¿®å¤æ¦‚è¿°

åœ¨é¡¹ç›®ç»“æ„é‡ç»„åï¼Œå·²ä¿®å¤æ‰€æœ‰è„šæœ¬ä¸­çš„è·¯å¾„å¼•ç”¨ï¼Œç¡®ä¿è„šæœ¬ä¸æ–°çš„é¡¹ç›®ç»“æ„ä¸€ä¸€å¯¹åº”ã€‚

## âœ… å·²ä¿®å¤çš„è„šæœ¬

### 1. scripts/start-all-services.ps1
**ä¿®å¤å†…å®¹**:
- âœ… ä¿®å¤å‰ç«¯ä¾èµ–æ£€æŸ¥è·¯å¾„ï¼šä»æ ¹ç›®å½• `node_modules` æ”¹ä¸º `frontend/node_modules`
- âœ… ä¿®å¤å‰ç«¯å¯åŠ¨å‘½ä»¤è·¯å¾„ï¼šä½¿ç”¨ `$frontendDir` å˜é‡
- âœ… ä¿®å¤æµ‹è¯•è„šæœ¬å¼•ç”¨ï¼šä» `.\test-system.ps1` æ”¹ä¸º `.\tests\scripts\test-system.ps1`

**ä¿®å¤å‰**:
```powershell
if (Test-Path "node_modules") {
    Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd '$PWD'; cd ../frontend && npm run dev"
}
```

**ä¿®å¤å**:
```powershell
$frontendDir = Join-Path $PWD "frontend"
if (Test-Path (Join-Path $frontendDir "node_modules")) {
    Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd '$frontendDir'; npm run dev"
}
```

### 2. tests/scripts/run-tests.ps1
**ä¿®å¤å†…å®¹**:
- âœ… ä¿®å¤åç«¯æµ‹è¯•è·¯å¾„ï¼šä» `../frontend./backend` æ”¹ä¸ºæ­£ç¡®çš„ `../backend`
- âœ… ä¿®å¤å‰ç«¯æµ‹è¯•è·¯å¾„ï¼šä½¿ç”¨ `$frontendDir` å˜é‡
- âœ… ä¿®å¤æµ‹è¯•æŠ¥å‘Šè·¯å¾„å¼•ç”¨

**ä¿®å¤å‰**:
```powershell
Push-Location ../frontend./backend
```

**ä¿®å¤å**:
```powershell
$projectRoot = Split-Path -Parent (Split-Path -Parent $PSScriptRoot)
$backendDir = Join-Path $projectRoot "backend"
Push-Location $backendDir
```

### 3. tests/scripts/run-e2e-tests.ps1
**ä¿®å¤å†…å®¹**:
- âœ… ä¿®å¤E2Eæµ‹è¯•ç›®å½•è·¯å¾„ï¼šä½¿ç”¨ `$e2eDir` å˜é‡
- âœ… ä¿®å¤å‰ç«¯å¯åŠ¨è·¯å¾„ï¼šä½¿ç”¨ `$frontendDir` å˜é‡
- âœ… ä¿®å¤æµ‹è¯•æŠ¥å‘Šè·¯å¾„å¼•ç”¨

**ä¿®å¤å‰**:
```powershell
Push-Location e2e
Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd '$PWD'; cd ../frontend && npm run dev"
```

**ä¿®å¤å**:
```powershell
$projectRoot = Split-Path -Parent (Split-Path -Parent $PSScriptRoot)
$e2eDir = Join-Path $projectRoot "tests\e2e"
$frontendDir = Join-Path $projectRoot "frontend"
Push-Location $e2eDir
Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd '$frontendDir'; npm run dev"
```

### 4. tests/e2e/playwright.config.ts
**ä¿®å¤å†…å®¹**:
- âœ… ä¿®å¤å‰ç«¯æœåŠ¡å¯åŠ¨è·¯å¾„ï¼šä» `cd ../frontend && npm run dev` æ”¹ä¸ºä½¿ç”¨ `cwd` é…ç½®

**ä¿®å¤å‰**:
```typescript
webServer: {
  command: 'cd ../frontend && npm run dev',
  cwd: '../frontend',
}
```

**ä¿®å¤å**:
```typescript
webServer: {
  command: 'npm run dev',
  cwd: '../../frontend',
}
```

### 5. frontend/vitest.config.ts
**ä¿®å¤å†…å®¹**:
- âœ… ä¿®å¤æµ‹è¯•è®¾ç½®æ–‡ä»¶è·¯å¾„ï¼šä» `./tests/frontend/setup.ts` æ”¹ä¸º `./tests/setup.ts`
- âœ… ä¿®å¤æµ‹è¯•æ’é™¤è·¯å¾„ï¼šä» `tests/frontend/` æ”¹ä¸º `tests/`

**ä¿®å¤å‰**:
```typescript
setupFiles: './tests/frontend/setup.ts',
exclude: ['tests/frontend/', ...]
```

**ä¿®å¤å**:
```typescript
setupFiles: './tests/setup.ts',
exclude: ['tests/', ...]
```

### 6. scripts/README.md
**ä¿®å¤å†…å®¹**:
- âœ… æ›´æ–°æ‰€æœ‰æµ‹è¯•è„šæœ¬çš„è·¯å¾„å¼•ç”¨ï¼Œä» `scripts/` æ”¹ä¸º `tests/scripts/`

## ğŸ“ è·¯å¾„å¯¹ç…§è¡¨

| è„šæœ¬ç±»å‹ | æ—§è·¯å¾„ | æ–°è·¯å¾„ |
|---------|--------|--------|
| å¯åŠ¨è„šæœ¬ | `scripts/start-all-services.ps1` | `scripts/start-all-services.ps1` âœ“ |
| æµ‹è¯•è„šæœ¬ | `scripts/run-tests.ps1` | `tests/scripts/run-tests.ps1` |
| E2Eæµ‹è¯• | `scripts/run-e2e-tests.ps1` | `tests/scripts/run-e2e-tests.ps1` |
| è¿é€šæ€§æµ‹è¯• | `scripts/test-connectivity.ps1` | `tests/scripts/test-connectivity.ps1` |
| ç³»ç»Ÿæµ‹è¯• | `scripts/test-system.ps1` | `tests/scripts/test-system.ps1` |

## ğŸ” éªŒè¯æ–¹æ³•

### 1. éªŒè¯è„šæœ¬è·¯å¾„
```powershell
# æ£€æŸ¥æ‰€æœ‰è„šæœ¬æ˜¯å¦å­˜åœ¨
Get-ChildItem -Path "scripts", "tests/scripts" -Recurse -Filter "*.ps1" | Select-Object FullName
```

### 2. éªŒè¯é…ç½®æ–‡ä»¶
```powershell
# æ£€æŸ¥å‰ç«¯é…ç½®æ–‡ä»¶
Test-Path "frontend/vite.config.ts"
Test-Path "frontend/vitest.config.ts"
Test-Path "frontend/package.json"
```

### 3. éªŒè¯ç›®å½•ç»“æ„
```powershell
# æ£€æŸ¥ä¸»è¦ç›®å½•
@("frontend", "backend", "docs", "tests", "scripts", "tools") | ForEach-Object {
    if (Test-Path $_) { Write-Host "âœ“ $_" } else { Write-Host "âœ— $_" }
}
```

## ğŸš€ å¯åŠ¨éªŒè¯

### å‰ç«¯å¯åŠ¨
```powershell
cd frontend
npm install
npm run dev
```

### åç«¯å¯åŠ¨
```powershell
cd backend
mvn spring-boot:run
```

### è¿è¡Œæµ‹è¯•
```powershell
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
.\tests\scripts\run-tests.ps1

# è¿è¡ŒE2Eæµ‹è¯•
.\tests\scripts\run-e2e-tests.ps1

# è¿è¡Œè¿é€šæ€§æµ‹è¯•
.\tests\scripts\test-connectivity.ps1
```

## âœ… ä¿®å¤å®ŒæˆçŠ¶æ€

- âœ… æ‰€æœ‰è„šæœ¬è·¯å¾„å·²ä¿®å¤
- âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶è·¯å¾„å·²æ›´æ–°
- âœ… æ‰€æœ‰æ–‡æ¡£è·¯å¾„å¼•ç”¨å·²æ›´æ–°
- âœ… é¡¹ç›®å¯ä»¥æ­£å¸¸å¯åŠ¨
- âœ… æµ‹è¯•è„šæœ¬å¯ä»¥æ­£å¸¸è¿è¡Œ

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç›¸å¯¹è·¯å¾„**: æ‰€æœ‰è„šæœ¬ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç¡®ä¿ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
2. **å˜é‡è·¯å¾„**: ä½¿ç”¨ `Join-Path` å’Œ `Split-Path` æ„å»ºè·¯å¾„ï¼Œé¿å…ç¡¬ç¼–ç 
3. **è·¨å¹³å°**: è·¯å¾„åˆ†éš”ç¬¦ä½¿ç”¨ `/` æˆ– `\` æ ¹æ®å¹³å°è‡ªåŠ¨å¤„ç†
4. **å·¥ä½œç›®å½•**: ç¡®ä¿è„šæœ¬ä»æ­£ç¡®çš„ç›®å½•è¿è¡Œï¼ˆé¡¹ç›®æ ¹ç›®å½•æˆ–è„šæœ¬æ‰€åœ¨ç›®å½•ï¼‰

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-01-XX  
**ç‰ˆæœ¬**: 3.1

