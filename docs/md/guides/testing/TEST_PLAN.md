# AgriVerse 完整测试计划

## 测试概述

本文档描述了 AgriVerse 农业产品融销平台的完整测试计划，确保所有功能模块和细节都得到充分测试。

## 测试范围

### 1. 后端API测试

#### 1.1 认证模块
- [x] 用户注册（所有角色）
- [x] 用户登录（所有角色）
- [x] 发送验证码（注册/登录/重置密码）
- [x] 验证验证码
- [x] 重置密码
- [x] 刷新Token
- [x] 获取当前用户信息
- [x] 登出
- [x] 检查手机号是否存在
- [x] 健康检查

#### 1.2 农户模块
- [x] 创建商品
- [x] 获取商品列表（所有状态筛选）
- [x] 商品上架/下架
- [x] 获取商品数据看板
- [x] 商品搜索
- [x] 分页功能
- [x] 权限验证

#### 1.3 买家模块
- [x] 查看商品列表（分类筛选/搜索）
- [x] 查看商品详情
- [x] 添加商品到购物车
- [x] 更新购物车商品
- [x] 删除购物车商品
- [x] 清空购物车
- [x] 创建订单
- [x] 获取订单列表（状态筛选）
- [x] 获取订单详情
- [x] 取消订单
- [x] 确认收货
- [x] 管理收货地址
- [x] 申请退款

#### 1.4 银行模块
- [x] 创建贷款产品
- [x] 更新贷款产品
- [x] 获取贷款产品列表
- [x] 获取贷款申请列表
- [x] 审批贷款申请
- [x] 拒绝贷款申请
- [x] 放款
- [x] 获取逾期贷款列表
- [x] 逾期管理
- [x] 对账功能
- [x] 获取统计数据
- [x] 客户管理
- [x] 风险控制

#### 1.5 专家模块
- [x] 搜索问题
- [x] 获取待回答问题列表
- [x] 回答问题
- [x] 获取我的回答列表
- [x] 管理预约时段
- [x] 获取预约列表
- [x] 获取收入统计
- [x] 内容管理

#### 1.6 管理员模块
- [x] 用户管理（查询/搜索/详情/状态更新/角色更新）
- [x] 订单监控（统计/查询/详情）
- [x] 退款仲裁
- [x] 内容审核（商品/专家/内容）
- [x] 系统配置
- [x] 权限管理
- [x] 操作日志
- [x] 数据统计
- [x] 灰度发布
- [x] 优惠券管理
- [x] 轮播图管理

#### 1.7 文件上传模块
- [x] 上传文件
- [x] 文件类型验证
- [x] 文件大小限制
- [x] 文件删除

### 2. 前端组件测试

#### 2.1 UI组件
- [x] Button组件
- [ ] Input组件
- [ ] Dialog组件
- [ ] Dropdown组件
- [ ] Table组件
- [ ] Form组件
- [ ] Card组件

#### 2.2 页面组件
- [ ] 登录页面
- [ ] 注册页面
- [ ] 农户应用页面
- [ ] 买家应用页面
- [ ] 银行应用页面
- [ ] 专家应用页面
- [ ] 管理员应用页面

#### 2.3 业务组件
- [ ] 商品列表组件
- [ ] 商品详情组件
- [ ] 购物车组件
- [ ] 订单组件
- [ ] 支付组件

### 3. 集成测试

- [x] 完整业务流程：农户创建商品 -> 买家查看 -> 买家下单
- [x] 跨角色权限控制
- [ ] 支付流程
- [ ] 退款流程
- [ ] 贷款申请流程
- [ ] 专家问答流程

### 4. E2E测试

- [ ] 用户注册到下单完整流程
- [ ] 农户商品管理流程
- [ ] 银行贷款审批流程
- [ ] 专家问答流程
- [ ] 管理员审核流程

### 5. 性能测试

- [ ] API响应时间测试
- [ ] 并发请求测试
- [ ] 数据库查询性能测试
- [ ] 文件上传性能测试

### 6. 安全测试

- [x] 认证和授权测试
- [x] 跨角色权限测试
- [ ] SQL注入测试
- [ ] XSS攻击测试
- [ ] CSRF防护测试
- [ ] Token过期处理测试

### 7. 兼容性测试

- [ ] 浏览器兼容性（Chrome/Firefox/Safari/Edge）
- [ ] 移动端兼容性
- [ ] 响应式设计测试

## 测试执行

### 后端测试

```bash
cd backend
mvn test
```

### 前端测试

```bash
npm run test
```

### 测试覆盖率

```bash
# 后端
mvn test jacoco:report

# 前端
npm run test:coverage
```

## 测试报告

测试报告位置：
- 后端：`backend/target/site/surefire-report.html`
- 前端：`coverage/index.html`

## 持续改进

1. 定期审查测试覆盖率
2. 根据新功能添加测试用例
3. 优化测试执行时间
4. 提高测试稳定性

